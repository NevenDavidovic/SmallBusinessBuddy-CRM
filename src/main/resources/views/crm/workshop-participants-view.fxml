<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="smallbusinessbuddycrm.controllers.workshop.WorkshopParticipantsViewController">
    <top>
        <VBox spacing="10.0" BorderPane.alignment="CENTER">
            <children>
                <HBox alignment="CENTER_LEFT" spacing="10.0">
                    <children>
                        <Label fx:id="workshopParticipantsPageTitle" textFill="#0099cc">
                            <font>
                                <Font name="System Bold" size="24.0" />
                            </font>
                        </Label>
                        <Label fx:id="workshopNameLabel" text="No workshop selected" textFill="#71757a">
                            <font>
                                <Font name="System Bold" size="14.0" />
                            </font>
                        </Label>
                    </children>
                </HBox>
                <HBox alignment="CENTER_LEFT" spacing="15.0">
                    <children>
                        <Label fx:id="totalParticipantsLabel" text="Total: 0" textFill="#333">
                            <font>
                                <Font size="12.0" />
                            </font>
                        </Label>
                        <Label fx:id="adultsCountLabel" text="Adults: 0" textFill="#333">
                            <font>
                                <Font size="12.0" />
                            </font>
                        </Label>
                        <Label fx:id="childrenCountLabel" text="Children: 0" textFill="#333">
                            <font>
                                <Font size="12.0" />
                            </font>
                        </Label>
                        <Label fx:id="paidCountLabel" text="Paid: 0" textFill="#28a745">
                            <font>
                                <Font size="12.0" />
                            </font>
                        </Label>
                        <Label fx:id="pendingCountLabel" text="Pending: 0" textFill="#ffc107">
                            <font>
                                <Font size="12.0" />
                            </font>
                        </Label>
                        <!-- TEACHER LABEL (Read-only display) -->
                        <Separator orientation="VERTICAL" />
                        <Label fx:id="teacherLabel" text="Teacher: Not assigned" textFill="#dc3545">
                            <font>
                                <Font size="12.0" />
                            </font>
                        </Label>
                        <!-- END OF TEACHER LABEL -->
                        <HBox alignment="CENTER_RIGHT" HBox.hgrow="ALWAYS" spacing="5.0">
                            <children>
                                <!-- REMOVED: manageTeachersButton -->
                                <Button fx:id="exportParticipantsButton"
                                        style="-fx-background-color: white; -fx-border-color: #dfe3eb; -fx-border-radius: 4;">
                                    <HBox.margin>
                                        <Insets right="5.0" />
                                    </HBox.margin>
                                </Button>
                                <Button fx:id="refreshButton"
                                        style="-fx-background-color: white; -fx-border-color: #dfe3eb; -fx-border-radius: 4;" />
                            </children>
                        </HBox>
                    </children>
                </HBox>
            </children>
            <padding>
                <Insets top="10" right="10" bottom="10" left="10" />
            </padding>
        </VBox>
    </top>
    <center>
        <TabPane fx:id="participantsTabPane" tabClosingPolicy="UNAVAILABLE">
            <!-- Current Participants Tab -->
            <Tab fx:id="currentParticipantsTab">
                <VBox spacing="10.0">
                    <children>
                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                            <children>
                                <TextField fx:id="searchParticipantsField" prefWidth="250.0" style="-fx-border-color: #dfe3eb;" />
                                <ComboBox fx:id="participantTypeFilter" prefWidth="120.0" style="-fx-border-color: #dfe3eb;" />
                                <ComboBox fx:id="paymentStatusFilter" prefWidth="120.0" style="-fx-border-color: #dfe3eb;" />
                                <HBox alignment="CENTER_RIGHT" HBox.hgrow="ALWAYS">
                                    <children>
                                        <Button fx:id="removeSelectedButton"
                                                style="-fx-background-color: #dc3545; -fx-text-fill: white; -fx-border-radius: 4;" />
                                    </children>
                                </HBox>
                            </children>
                        </HBox>
                        <ScrollPane fitToHeight="true" fitToWidth="true" VBox.vgrow="ALWAYS">
                            <TableView fx:id="participantsTable" prefHeight="400.0">
                                <columns>
                                    <TableColumn fx:id="selectParticipantColumn" prefWidth="40.0" />
                                    <TableColumn fx:id="participantNameColumn" prefWidth="150.0" />
                                    <TableColumn fx:id="participantTypeColumn" prefWidth="60.0" />
                                    <TableColumn fx:id="participantAgeColumn" prefWidth="50.0" />
                                    <TableColumn fx:id="participantEmailColumn" prefWidth="150.0" />
                                    <TableColumn fx:id="participantPhoneColumn" prefWidth="120.0" />
                                    <TableColumn fx:id="parentInfoColumn" prefWidth="150.0" />
                                    <TableColumn fx:id="paymentStatusColumn" prefWidth="80.0" />
                                    <TableColumn fx:id="notesColumn" prefWidth="120.0" />
                                    <TableColumn fx:id="enrollmentDateColumn" prefWidth="100.0" />
                                    <TableColumn fx:id="actionsColumn" prefWidth="80.0" />
                                </columns>
                            </TableView>
                        </ScrollPane>
                    </children>
                    <padding>
                        <Insets top="10" right="10" bottom="10" left="10" />
                    </padding>
                </VBox>
            </Tab>

            <!-- Add Participants Tab -->
            <Tab fx:id="addParticipantsTab">
                <ScrollPane fitToHeight="true" fitToWidth="true">
                    <VBox spacing="20.0">
                        <children>
                            <!-- Add Adults Section -->
                            <VBox spacing="10.0" style="-fx-border-color: #dfe3eb; -fx-border-radius: 5; -fx-padding: 15;">
                                <children>
                                    <HBox alignment="CENTER_LEFT" spacing="10.0">
                                        <children>
                                            <Label fx:id="addAdultParticipantsLabel" textFill="#0099cc">
                                                <font>
                                                    <Font name="System Bold" size="16.0" />
                                                </font>
                                            </Label>
                                            <Label fx:id="availableAdultsCountLabel" text="(0 available)" textFill="#71757a">
                                                <font>
                                                    <Font size="12.0" />
                                                </font>
                                            </Label>
                                        </children>
                                    </HBox>
                                    <HBox alignment="CENTER_LEFT" spacing="10.0">
                                        <children>
                                            <TextField fx:id="searchAdultsField" prefWidth="250.0" style="-fx-border-color: #dfe3eb;" />
                                            <CheckBox fx:id="membersOnlyAdultsFilter" />
                                            <HBox alignment="CENTER_RIGHT" HBox.hgrow="ALWAYS">
                                                <children>
                                                    <Button fx:id="selectAllAdultsButton" style="-fx-background-color: white; -fx-border-color: #dfe3eb;" />
                                                    <Button fx:id="clearAdultsSelectionButton" style="-fx-background-color: white; -fx-border-color: #dfe3eb;" />
                                                </children>
                                            </HBox>
                                        </children>
                                    </HBox>
                                    <ScrollPane fitToHeight="true" fitToWidth="true" prefHeight="200.0">
                                        <TableView fx:id="availableAdultsTable" editable="true">
                                            <columns>
                                                <TableColumn fx:id="selectAdultColumn" prefWidth="40.0" />
                                                <TableColumn fx:id="adultNameColumn" prefWidth="150.0" />
                                                <TableColumn fx:id="adultEmailColumn" prefWidth="180.0" />
                                                <TableColumn fx:id="adultPhoneColumn" prefWidth="120.0" />
                                                <TableColumn fx:id="adultMemberStatusColumn" prefWidth="80.0" />
                                                <TableColumn fx:id="adultAgeColumn" prefWidth="50.0" />
                                            </columns>
                                        </TableView>
                                    </ScrollPane>
                                    <HBox spacing="10.0">
                                        <children>
                                            <Label fx:id="paymentStatusLabel" />
                                            <ComboBox fx:id="adultsPaymentStatusCombo" prefWidth="120.0" />
                                            <Label fx:id="notesLabel" />
                                            <TextField fx:id="adultsNotesField" prefWidth="200.0" />
                                            <HBox alignment="CENTER_RIGHT" HBox.hgrow="ALWAYS">
                                                <children>
                                                    <Button fx:id="addSelectedAdultsButton"
                                                            style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-border-radius: 4;" />
                                                </children>
                                            </HBox>
                                        </children>
                                    </HBox>
                                </children>
                            </VBox>

                            <!-- Add Children Section -->
                            <VBox spacing="10.0" style="-fx-border-color: #dfe3eb; -fx-border-radius: 5; -fx-padding: 15;">
                                <children>
                                    <HBox alignment="CENTER_LEFT" spacing="10.0">
                                        <children>
                                            <Label fx:id="addChildParticipantsLabel" textFill="#0099cc">
                                                <font>
                                                    <Font name="System Bold" size="16.0" />
                                                </font>
                                            </Label>
                                            <Label fx:id="availableChildrenCountLabel" text="(0 available)" textFill="#71757a">
                                                <font>
                                                    <Font size="12.0" />
                                                </font>
                                            </Label>
                                        </children>
                                    </HBox>
                                    <HBox alignment="CENTER_LEFT" spacing="10.0">
                                        <children>
                                            <TextField fx:id="searchChildrenField" prefWidth="250.0" style="-fx-border-color: #dfe3eb;" />
                                            <ComboBox fx:id="ageRangeFilter" prefWidth="120.0" style="-fx-border-color: #dfe3eb;" />
                                            <CheckBox fx:id="membersOnlyChildrenFilter" />
                                            <HBox alignment="CENTER_RIGHT" HBox.hgrow="ALWAYS">
                                                <children>
                                                    <Button fx:id="selectAllChildrenButton" style="-fx-background-color: white; -fx-border-color: #dfe3eb;" />
                                                    <Button fx:id="clearChildrenSelectionButton" style="-fx-background-color: white; -fx-border-color: #dfe3eb;" />
                                                </children>
                                            </HBox>
                                        </children>
                                    </HBox>
                                    <ScrollPane fitToHeight="true" fitToWidth="true" prefHeight="200.0">
                                        <TableView fx:id="availableChildrenTable" editable="true">
                                            <columns>
                                                <TableColumn fx:id="selectChildColumn" prefWidth="40.0" />
                                                <TableColumn fx:id="childNameColumn" prefWidth="120.0" />
                                                <TableColumn fx:id="childAgeColumn" prefWidth="50.0" />
                                                <TableColumn fx:id="childGenderColumn" prefWidth="70.0" />
                                                <TableColumn fx:id="childMemberStatusColumn" prefWidth="80.0" />
                                                <TableColumn fx:id="parentNameColumn" prefWidth="150.0" />
                                                <TableColumn fx:id="parentEmailColumn" prefWidth="150.0" />
                                                <TableColumn fx:id="parentPhoneColumn" prefWidth="120.0" />
                                            </columns>
                                        </TableView>
                                    </ScrollPane>
                                    <HBox spacing="10.0">
                                        <children>
                                            <Label fx:id="paymentStatusLabel2" />
                                            <ComboBox fx:id="childrenPaymentStatusCombo" prefWidth="120.0" />
                                            <Label fx:id="notesLabel2" />
                                            <TextField fx:id="childrenNotesField" prefWidth="200.0" />
                                            <HBox alignment="CENTER_RIGHT" HBox.hgrow="ALWAYS">
                                                <children>
                                                    <Button fx:id="addSelectedChildrenButton"
                                                            style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-border-radius: 4;" />
                                                </children>
                                            </HBox>
                                        </children>
                                    </HBox>
                                </children>
                            </VBox>

                            <!-- Quick Actions Section -->
                            <VBox spacing="10.0" style="-fx-border-color: #dfe3eb; -fx-border-radius: 5; -fx-padding: 15;">
                                <children>
                                    <Label fx:id="quickActionsLabel" textFill="#0099cc">
                                        <font>
                                            <Font name="System Bold" size="16.0" />
                                        </font>
                                    </Label>
                                </children>
                            </VBox>
                        </children>
                        <padding>
                            <Insets top="10" right="10" bottom="10" left="10" />
                        </padding>
                    </VBox>
                </ScrollPane>
            </Tab>
        </TabPane>
    </center>
</BorderPane>